import{_ as t,c as e,a as s,o as a}from"./app-R7qZEQmX.js";const l={};function n(r,i){return a(),e("div",null,i[0]||(i[0]=[s('<h2 id="解决-astrbot插件安装时显示-解析版本信息失败-的问题或者其他问题" tabindex="-1"><a class="header-anchor" href="#解决-astrbot插件安装时显示-解析版本信息失败-的问题或者其他问题"><span>解决 astrbot插件安装时显示&quot;解析版本信息失败&quot; 的问题或者其他问题</span></a></h2><div class="hint-container tip"><p class="hint-container-title">提示</p><p>适用于 <code>AstrBot</code> 框架</p></div><h3 id="遇到的问题可能有" tabindex="-1"><a class="header-anchor" href="#遇到的问题可能有"><span>遇到的问题可能有:</span></a></h3><ul><li><p>Cannot connect to host api.github.com:443 ssl:True [SSLCertVerificationError: (1, &#39;[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1000)&#39;)]</p></li><li><p>Cannot connect to host api.soulter.top:443 ssl:True [SSLCertVerificationError: (1, &#39;[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:997)&#39;)]</p></li><li><p>Cannot connect to host api.soulter.top:443 ssl:True [SSLCertVerificationError: (1, &#39;[SSL: CERTIFICATE_VERIFY_FAILED]</p></li><li><p>Cannot connect to host github.com:443 ssl:True [SSLCertVerificationError: (1, &#39;[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1020)&#39;)]</p></li></ul><h3 id="_1-更新或安装根证书" tabindex="-1"><a class="header-anchor" href="#_1-更新或安装根证书"><span>1. 更新或安装根证书</span></a></h3><ul><li><strong>macOS 系统</strong>：<br> 如果你用的是 macOS，Python 通常会附带一个 <code>Install Certificates.command</code> 脚本。你可以在终端里运行它，确保系统信任最新的根证书。</li><li><strong>Windows 系统</strong>：<br> Windows 下你可能需要手动更新根证书或者重新安装 Python，确保安装过程中包含最新的证书链。另外，也可以通过系统更新来确保根证书库是最新的。</li></ul><h3 id="_2-使用-certifi-库确保使用最新的-ca-列表" tabindex="-1"><a class="header-anchor" href="#_2-使用-certifi-库确保使用最新的-ca-列表"><span>2. 使用 certifi 库确保使用最新的 CA 列表</span></a></h3><ul><li>目前已经在代码里导入了 <code>certifi</code> 并创建了 SSL 上下文：<div class="language-python line-numbers-mode" data-ext="python" data-title="python"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ssl_context </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ssl</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">create_default_context</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">cafile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">certifi</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">where</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">())</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>这一步通常没问题，但你可以再确认下程序启动前，环境变量 <code>SSL_CERT_FILE</code> 是否正确设置为 <code>certifi.where()</code> 的返回路径。可以在运行程序前设置这个环境变量，例如：<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">export</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> SSL_CERT_FILE</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=$(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">python</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">import certifi; print(certifi.where())</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>或在 Windows 下设置环境变量，然后再启动程序。</li></ul><h3 id="_3-检查代理设置" tabindex="-1"><a class="header-anchor" href="#_3-检查代理设置"><span>3. 检查代理设置</span></a></h3><ul><li>如果你在使用代理，确认代理配置是否正确。有些代理会拦截 HTTPS 流量并替换证书，导致验证失败。可以尝试： <ul><li>暂时禁用代理，看看是否问题依然存在。</li><li>或在 aiohttp 的 <code>ClientSession</code> 中禁用 <code>trust_env</code>（将其设置为 False），避免读取系统代理设置。</li></ul></li></ul><h3 id="_4-临时禁用-ssl-验证-不推荐长期使用" tabindex="-1"><a class="header-anchor" href="#_4-临时禁用-ssl-验证-不推荐长期使用"><span>4. 临时禁用 SSL 验证（不推荐长期使用）</span></a></h3><ul><li>如果以上办法都试过了，还想暂时绕过这个问题，可以在创建 aiohttp 的 TCPConnector 时直接关闭 SSL 验证：<div class="language-python line-numbers-mode" data-ext="python" data-title="python"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">connector </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> aiohttp</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">TCPConnector</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ssl</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">False</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>但请记住，这样做会降低安全性，因为你将不会验证服务器的身份，容易受到中间人攻击，只能作为临时调试方案。</li></ul><h3 id="_5-验证代码环境" tabindex="-1"><a class="header-anchor" href="#_5-验证代码环境"><span>5. 验证代码环境</span></a></h3><ul><li>确保你安装了最新版本的 aiohttp、certifi 和 Python，因为有时候版本问题也会导致证书验证异常。可以尝试更新这些包：<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pip</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --upgrade</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> aiohttp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> certifi</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul><h3 id="或者其他解决方法" tabindex="-1"><a class="header-anchor" href="#或者其他解决方法"><span>或者其他解决方法</span></a></h3><ul><li><a href="https://docs.wenturc.com/tech/17.html" target="_blank" rel="noopener noreferrer">记录: ca 证书未成功加载的问题及其解决办法</a></li></ul><p>你也可以自行在网络上搜索相关解决方法。</p>',17)]))}const o=t(l,[["render",n],["__file","18.html.vue"]]),c=JSON.parse(`{"path":"/tech/18.html","title":"解决 astrbot插件安装时显示\\"解析版本信息失败\\" 的问题或者其他问题","lang":"zh-CN","frontmatter":{"title":"解决 astrbot插件安装时显示\\"解析版本信息失败\\" 的问题或者其他问题","description":"解决 astrbot插件安装时显示\\"解析版本信息失败\\" 的问题或者其他问题 提示 适用于 AstrBot 框架 遇到的问题可能有: Cannot connect to host api.github.com:443 ssl:True [SSLCertVerificationError: (1, '[SSL: CERTIFICATE_VERIFY_FAI...","head":[["meta",{"property":"og:url","content":"https://docs.wenturc.com/tech/18.html"}],["meta",{"property":"og:site_name","content":"WentUrc Docs"}],["meta",{"property":"og:title","content":"解决 astrbot插件安装时显示\\"解析版本信息失败\\" 的问题或者其他问题"}],["meta",{"property":"og:description","content":"解决 astrbot插件安装时显示\\"解析版本信息失败\\" 的问题或者其他问题 提示 适用于 AstrBot 框架 遇到的问题可能有: Cannot connect to host api.github.com:443 ssl:True [SSLCertVerificationError: (1, '[SSL: CERTIFICATE_VERIFY_FAI..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-04-02T10:57:23.000Z"}],["meta",{"property":"article:modified_time","content":"2025-04-02T10:57:23.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"解决 astrbot插件安装时显示\\\\\\"解析版本信息失败\\\\\\" 的问题或者其他问题\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-04-02T10:57:23.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"解决 astrbot插件安装时显示\\"解析版本信息失败\\" 的问题或者其他问题","slug":"解决-astrbot插件安装时显示-解析版本信息失败-的问题或者其他问题","link":"#解决-astrbot插件安装时显示-解析版本信息失败-的问题或者其他问题","children":[{"level":3,"title":"遇到的问题可能有:","slug":"遇到的问题可能有","link":"#遇到的问题可能有","children":[]},{"level":3,"title":"1. 更新或安装根证书","slug":"_1-更新或安装根证书","link":"#_1-更新或安装根证书","children":[]},{"level":3,"title":"2. 使用 certifi 库确保使用最新的 CA 列表","slug":"_2-使用-certifi-库确保使用最新的-ca-列表","link":"#_2-使用-certifi-库确保使用最新的-ca-列表","children":[]},{"level":3,"title":"3. 检查代理设置","slug":"_3-检查代理设置","link":"#_3-检查代理设置","children":[]},{"level":3,"title":"4. 临时禁用 SSL 验证（不推荐长期使用）","slug":"_4-临时禁用-ssl-验证-不推荐长期使用","link":"#_4-临时禁用-ssl-验证-不推荐长期使用","children":[]},{"level":3,"title":"5. 验证代码环境","slug":"_5-验证代码环境","link":"#_5-验证代码环境","children":[]},{"level":3,"title":"或者其他解决方法","slug":"或者其他解决方法","link":"#或者其他解决方法","children":[]}]}],"readingTime":{"minutes":2.28,"words":684},"git":{"createdTime":1743591443000,"updatedTime":1743591443000,"contributors":[{"name":"LI SONGSONG","email":"IGCrystal@wenturc.com","commits":1,"url":"https://github.com/LI SONGSONG"}]},"autoDesc":true,"filePathRelative":"tech/18.md","categoryList":[{"id":"d9f913","sort":10008,"name":"tech"}],"bulletin":false}`);export{o as comp,c as data};
